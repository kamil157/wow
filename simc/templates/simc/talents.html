{% extends "simc/base.html" %}

{% block title %}
{{ spec.name }} {{ class }}
{% endblock %}

{% block favicon %}
//wow.zamimg.com/images/wow/icons/medium/{{ spec.icon }}.jpg
{% endblock %}

{% block content %}
<h4>
    Choose talents to compare
</h4>
<form action="" method="post">
    {% csrf_token %}
    <table class="table">
        <tbody>
            {% for field in form %}
                {{ field }}
            {% endfor %}
        </tbody>
    </table>
    <input class="btn btn-primary" type="submit" value="Submit">
</form>

<div>
    {% if output %}
    <hr>
    <h4>
        SimCraft input ({{ num_configs }} configuration{{ num_configs|pluralize }})
    </h4>
    <div class="form-group">
        <textarea class="form-control" rows="6" readonly id="output" style="width: 100%; resize:none;">{{ output }}</textarea>
    </div>
    <button id="btn-clipboard" class="btn btn-default" data-clipboard-target="#output"
            data-placement="auto top" data-trigger="manual" data-title="Copied!">
        Copy to clipboard
    </button>
    {% endif %}
</div>
{% endblock %}

{% block js %}
<script type="text/javascript" src="//static-azeroth.cursecdn.com/current/js/syndication/tt.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js"></script>
<script>
var clipboard = new Clipboard('#btn-clipboard');

clipboard.on('success', function(e) {
    e.clearSelection();
    $(e.trigger).tooltip('show');
    setTimeout(function() {
        $(e.trigger).tooltip('hide');
    }, 1000);
});

$('input').change(function() {
    if (this.checked)
    {
        $(this.parentElement).addClass('checked');
    }
    else
    {
        $(this.parentElement).removeClass('checked');
    }
});
</script>
{% endblock %}